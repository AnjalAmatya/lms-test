<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L1 English for Communication - Lesson 1: Greetings</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bg.css">

    <script src="js/puter.js"></script>
    <script src="js/main.js"></script>
</head>
<body>

<header>
    <div class="progress-wrapper"><div class="progress-bar" id="pb"></div></div>
    <strong>
    <button class="speak_btn" data-target="speak1">&#128266;</button>
    <span id="speak1">Lesson 1: Greetings </span><span class="nepali_sub">(अभिवादन)</span>
    </strong>
</header>

<div class="scenery-container">
    <div class="sky-glow"></div>

    <div class="cloud c1 super-large"></div>
    <div class="cloud c2 medium"></div>
    <div class="cloud c3 super-large"></div>
    <div class="cloud c4 small"></div>
    <div class="cloud c5 small"></div>

    <div class="mountain_bg">
        <div class="mountain">
            <div class="mountain-top">
                <div class="mountain-cap-1"></div>
                <div class="mountain-cap-2"></div>
                <div class="mountain-cap-3"></div>
            </div>
        </div>
        <div class="mountain-two">
            <div class="mountain-top">
                <div class="mountain-cap-1"></div>
                <div class="mountain-cap-2"></div>
                <div class="mountain-cap-3"></div>
            </div>
        </div>
        <div class="mountain-three">
            <div class="mountain-top">
                <div class="mountain-cap-1"></div>
                <div class="mountain-cap-2"></div>
                <div class="mountain-cap-3"></div>
            </div>
        </div>
    </div><!-- /mountain_bg -->

    <div class="leaf l1">&#127811;</div>
    <div class="leaf l2">&#127807;</div>
    <div class="leaf l3">&#127811;</div>
    <div class="leaf l4">&#127807;</div>
    <div class="leaf l5">&#127811;</div>

    <div class="playground"></div>
</div>
<main>
    <div id="page6" class="page">
        <h2><button class="speak_btn" data-target="speak92">&#128266;</button>
            <span id="speak92">Let's Type</span>
            <span class="nepali_sub">टाइप गरौं</span>
        </h2>
        <p class="caption"><button class="speak_btn" data-target="speak93">&#128266;</button>
            <span id="speak93">Study the conversations below. Learn how we can greet others in different situations.</span>
            <span class="nepali_sub">तलका कुराकानीहरू अध्ययन गर्नुहोस्। विभिन्न परिस्थितिहरूमा हामी कसरी अरूलाई अभिवादन गर्न सक्छौं जान्नुहोस्।</span>
        </p>
        <div class="caption_convo">
            <h3>
                <button class="speak_btn" data-target="convo1_0">&#128266;</button>
                <span id="convo1_0">Conversation 1</span>
            </h3>
            <p>
                <button class="speak_btn" data-target="convo1_1" data-voice="male">&#128266;</button>
                <strong>A: </strong><span id="convo1_1">Hello!</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo1_2">&#128266;</button>
                <strong>You: </strong><span id="convo1_2">Oh hi! Meeting you after a long time.</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo1_3" data-voice="male">&#128266;</button>
                <strong>A: </strong><span id="convo1_3">Yes, it's so good to see you after a long time. How have you been?</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo1_4">&#128266;</button>
                <strong>You: </strong><span id="convo1_4">Great! How about you?</span>
            </p>
        </div><!-- /caption_convo -->
        <div class="caption_convo">
            <h3>
                <button class="speak_btn" data-target="convo2_0">&#128266;</button>
                <span id="convo2_0">Conversation 2</span>
            </h3>
            <p>
                <button class="speak_btn" data-target="convo2_1">&#128266;</button>
                <strong>You: </strong><span id="convo2_1">How do you do, Sujan?</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo2_2" data-voice="male">&#128266;</button>
                <strong>Sujan: </strong><span id="convo2_2">How do you do?</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo2_3">&#128266;</button>
                <strong>You: </strong><span id="convo2_3">Did you have a comfortable journey?</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo2_4" data-voice="male">&#128266;</button>
                <strong>Sujan: </strong><span id="convo2_4">Not too bad, thank you.</span>
            </p>
        </div><!-- /caption_convo -->
        <div class="caption_convo">
            <h3>
                <button class="speak_btn" data-target="convo3_0">&#128266;</button>
                <span id="convo3_0">Conversation 3</span>
            </h3>
            <p>
                <button class="speak_btn" data-target="convo3_1">&#128266;</button>
                <strong>You: </strong><span id="convo3_1">Good morning madam. I've been waiting to see you.</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo3_2">&#128266;</button>
                <strong>Sabitra: </strong><span id="convo3_2">It's good to see you too</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo3_3">&#128266;</button>
                <strong>You: </strong><span id="convo3_3">How are you?</span>
            </p>
            <p>
                <button class="speak_btn" data-target="convo3_4">&#128266;</button>
                <strong>Sabitra: </strong><span id="convo3_4">I'm fine thank you.</span>
            </p>
        </div><!-- /caption_convo -->
        <p class="caption"><button class="speak_btn" data-target="speak94">&#128266;</button>
            <span id="speak94">Complete the following conversations.</span>
            <span class="nepali_sub">निम्न कुराकानीहरू पूरा गर्नुहोस्।</span>
        </p>



<!--------------------------------- ---------------------------------------------->


<div class="chat-container">

    <div class="convo-section">
        <h3 class="convo-title"><button class="speak_btn" data-target="ct1" data-voice="male">&#128266;</button>1. <span id="ct1">Meeting Mr. Thakuri</span></h3>
        <div class="chat-thread">
            
            <div class="message received">
                <button class="speak_btn" data-target="speak95" data-voice="male">&#128266;</button>
                <div class="bubble">
                    <small>Visitor</small>
                    <span id="speak95">Good morning Mr. Thakuri.</span>
                </div>
            </div>

            <div class="message sent">
                <div class="bubble input-wrapper">
                    <small>You</small>
                    <div class="input-row">
                        <input type="text" id="in_q6_1" class="quiz-input" placeholder="Type here...">
                        <button class="check-btn" onclick="validateAnswer(this, 'Good Morning', 'q6_1')">Check</button>
                        
                        <button class="speak_btn" onclick="speakInput('in_q6_1')" title="Hear your answer">&#128266;</button>
                    </div>
                    <span class="status-icon"></span>
                </div>
            </div>

            <div class="message received">
                <button class="speak_btn" data-target="speak96" data-voice="male">&#128266;</button>
                <div class="bubble">
                    <small>Visitor</small>
                    <span id="speak96">How are you?</span>
                </div>
            </div>

            <div class="message sent">
                <div class="bubble input-wrapper">
                    <small>You</small>
                    <div class="input-row">
                        <input type="text" id="in_q6_2" class="quiz-input" placeholder="Type here...">
                        <button class="check-btn" onclick="validateAnswer(this, 'fine', 'q6_2')">Check</button>
                        <button class="speak_btn" onclick="speakInput('in_q6_2')">&#128266;</button>
                    </div>
                    <span class="status-icon"></span>
                </div>
            </div>

            <div class="message received">
                <button class="speak_btn" data-target="speak97" data-voice="male">&#128266;</button>
                <div class="bubble">
                    <small>Visitor</small>
                    <span id="speak97">I'm fine too. It's been long since we last met.</span>
                </div>
            </div>

            <div class="message sent">
                <div class="bubble input-wrapper">
                    <small>You</small>
                    <div class="input-row">
                        <input type="text" id="in_q6_3" class="quiz-input" placeholder="Type here...">
                        <button class="check-btn" onclick="validateAnswer(this, 'yes', 'q6_3')">Check</button>
                        <button class="speak_btn" onclick="speakInput('in_q6_3')">&#128266;</button>
                    </div>
                    <span class="status-icon"></span>
                </div>
            </div>
        </div><!-- /chat-thread -->
    </div>

    <div class="convo-section">
    <h3 class="convo-title"><button class="speak_btn" data-target="ct2" data-voice="male">&#128266;</button>2. <span id="ct2">At the Company</span></h3>
    <div class="chat-thread">
        <div class="message received">
            <button class="speak_btn" data-target="speak98" data-voice="male">&#128266;</button>
            <div class="bubble">
                <small>Vikram</small>
                <span id="speak98">Good morning, Sir!</span>
            </div>
        </div>

        <div class="message sent">
            <div class="bubble input-wrapper">
                <small>Kiran</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_4" class="quiz-input inline" placeholder="Type here...">
                    <span>, Vikram. I didn't see you in the company yesterday. Are you keeping well?</span>
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, 'Good Morning', 'q6_4')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_4', ', Vikram. I didnt see you in the company yesterday. Are you keeping well?', this)" data-voice="male">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message received">
            <div class="bubble input-wrapper">
                <small>Vikram</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_5" class="quiz-input inline" placeholder="Type here...">
                    <span>, thank you very much</span>
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, 'yes', 'q6_5')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_5', ', thank you very much', this)" data-voice="male">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>
    </div>
</div>

<div class="convo-section">
    <h3 class="convo-title"><button class="speak_btn" data-target="ct3" data-voice="male">&#128266;</button>3. <span id="ct3">You meet an American at the airport</span></h3>
    <div class="chat-thread">
        <div class="message sent">
            <div class="bubble input-wrapper">
                <small>You</small>
                <div class="inline-content">
                    <span>Good morning sir.</span>
                    <input type="text" id="in_q6_6" class="quiz-input inline" placeholder="Ask how he is...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, 'How are you', 'q6_6')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_6', '', this, 'Good morning sir. ')">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message received">
            <div class="bubble input-wrapper">
                <small>American</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_7" class="quiz-input inline" placeholder="Type here...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, 'fine', 'q6_7')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_7', '.', this)" data-voice="male">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message sent">
            <div class="bubble input-wrapper">
                <small>You</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_8" class="quiz-input inline" placeholder="Type here...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, ' ', 'q6_8')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_8', '.', this)">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message received">
            <div class="bubble input-wrapper">
                <small>American</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_9" class="quiz-input inline" placeholder="Type here...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, ' ', 'q6_9')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_9', '.', this)" data-voice="male">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

    </div>
</div>

<div class="convo-section">
    <h3 class="convo-title"><button class="speak_btn" data-target="ct4" data-voice="male">&#128266;</button>4. <span id="ct4">Business meeting at a restaurant</span></h3>
    <div class="chat-thread">
        <div class="message sent">
            <div class="bubble input-wrapper">
                <small>You</small>
                <div class="inline-content">
                    <span>Hello sir. Good afternoon.</span>
                    <input type="text" id="in_q6_10" class="quiz-input inline" placeholder="Ask how he is...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, 'How are you', 'q6_10')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_10', '', this, 'Hello sir. Good afternoon. ')">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message received">
            <div class="bubble input-wrapper">
                <small>Another Person</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_11" class="quiz-input inline" placeholder="Type here...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, 'fine', 'q6_11')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_11', '.', this)" data-voice="male">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message sent">
            <div class="bubble input-wrapper">
                <small>You</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_12" class="quiz-input inline" placeholder="Type here...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, ' ', 'q6_12')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_12', '', this)">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>

        <div class="message received">
            <div class="bubble input-wrapper">
                <small>Another Person</small>
                <div class="inline-content">
                    <input type="text" id="in_q6_13" class="quiz-input inline" placeholder="Type here...">
                </div>
                <div class="input-actions">
                    <button class="check-btn" onclick="validateAnswer(this, ' ', 'q6_13')">Check</button>
                    <button class="speak_btn" onclick="speakFullSentence('in_q6_13', '.', this)" data-voice="male">&#128266;</button>
                </div>
                <span class="status-icon"></span>
            </div>
        </div>
    </div>
</div>

</div><!-- /chat-container -->

<script>
   /**
 * Helper to speak the combined value of an input + static text
 * @param {string} inputId - The ID of the input field
 * @param {string} suffix - The remaining text of the sentence
 * @param {HTMLElement} btn - The button element that was clicked
 */
function speakFullSentence(inputId, suffix, btn, prefix = "") {
    const inputEl = document.getElementById(inputId);
    const userText = inputEl ? inputEl.value : "";
    
    // Combines them in the correct order: Prefix + User's Input + Suffix
    // Case 1 (Vikram): "" + "Good Morning" + ", Vikram..."
    // Case 2 (Airport): "Good morning sir. " + "How are you" + ""
    const fullMessage = prefix + userText + suffix;

    const isMale = btn && btn.dataset.voice === 'male';
    
    // Fallback: If input is empty, speak what we have (prefix or suffix)
    const finalSpeech = fullMessage.trim() === "" ? (prefix || suffix) : fullMessage;

    playSpeech(finalSpeech, isMale);
}

/**
 * Helper to speak just the input field value
 */
function speakInput(inputId, btn) {
    const val = document.getElementById(inputId).value;
    if (val.trim() !== "") {
        const isMale = btn && btn.dataset.voice === 'male';
        playSpeech(val, isMale);
    }
}
</script>
    </div><!-- /page -->
</main>
</body>